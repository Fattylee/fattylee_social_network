[{"/home/fattylee/workspace/social-network/client/src/index.js":"1","/home/fattylee/workspace/social-network/client/src/reportWebVitals.js":"2","/home/fattylee/workspace/social-network/client/src/App.jsx":"3","/home/fattylee/workspace/social-network/client/src/pages/Home.jsx":"4","/home/fattylee/workspace/social-network/client/src/pages/Login.jsx":"5","/home/fattylee/workspace/social-network/client/src/pages/Register.jsx":"6","/home/fattylee/workspace/social-network/client/src/components/Header.jsx":"7","/home/fattylee/workspace/social-network/client/src/components/Post.jsx":"8","/home/fattylee/workspace/social-network/client/src/components/Todo.jsx":"9","/home/fattylee/workspace/social-network/client/src/context/auth.js":"10","/home/fattylee/workspace/social-network/client/src/context/AuthRoute.jsx":"11","/home/fattylee/workspace/social-network/client/src/pages/NotFound.jsx":"12","/home/fattylee/workspace/social-network/client/src/context/ProtectedRoute.jsx":"13","/home/fattylee/workspace/social-network/client/src/pages/PostForm.jsx":"14","/home/fattylee/workspace/social-network/client/src/pages/Layout.jsx":"15","/home/fattylee/workspace/social-network/client/src/utils/apollo.js":"16","/home/fattylee/workspace/social-network/client/src/utils/hooks.js":"17","/home/fattylee/workspace/social-network/client/src/components/LikeButton.jsx":"18","/home/fattylee/workspace/social-network/client/src/components/DeleteButton.jsx":"19","/home/fattylee/workspace/social-network/client/src/utils/query.js":"20","/home/fattylee/workspace/social-network/client/src/components/MyPopup.jsx":"21","/home/fattylee/workspace/social-network/client/src/pages/SinglePost.jsx":"22","/home/fattylee/workspace/social-network/client/src/components/NetworkMessage.jsx":"23","/home/fattylee/workspace/social-network/client/src/components/CommentForm.jsx":"24","/home/fattylee/workspace/social-network/client/src/components/EditButton.jsx":"25","/home/fattylee/workspace/social-network/client/src/context/postForm.js":"26","/home/fattylee/workspace/social-network/client/src/components/CommentButton.jsx":"27","/home/fattylee/workspace/social-network/client/src/pages/InputTextForm.jsx":"28"},{"size":491,"mtime":1608794761269,"results":"29","hashOfConfig":"30"},{"size":362,"mtime":1608671255345,"results":"31","hashOfConfig":"30"},{"size":1422,"mtime":1609753996901,"results":"32","hashOfConfig":"30"},{"size":1641,"mtime":1610456449782,"results":"33","hashOfConfig":"30"},{"size":3005,"mtime":1609674906608,"results":"34","hashOfConfig":"30"},{"size":4585,"mtime":1609513549631,"results":"35","hashOfConfig":"30"},{"size":1834,"mtime":1609915830663,"results":"36","hashOfConfig":"30"},{"size":1367,"mtime":1610039721103,"results":"37","hashOfConfig":"30"},{"size":1529,"mtime":1609019288248,"results":"38","hashOfConfig":"30"},{"size":1208,"mtime":1609057742844,"results":"39","hashOfConfig":"30"},{"size":388,"mtime":1609061017092,"results":"40","hashOfConfig":"30"},{"size":228,"mtime":1609061462336,"results":"41","hashOfConfig":"30"},{"size":405,"mtime":1609062598832,"results":"42","hashOfConfig":"30"},{"size":3764,"mtime":1610103167325,"results":"43","hashOfConfig":"30"},{"size":3831,"mtime":1609151475405,"results":"44","hashOfConfig":"30"},{"size":745,"mtime":1610454043996,"results":"45","hashOfConfig":"30"},{"size":1222,"mtime":1609759147889,"results":"46","hashOfConfig":"30"},{"size":1903,"mtime":1610011269339,"results":"47","hashOfConfig":"30"},{"size":2591,"mtime":1610457845118,"results":"48","hashOfConfig":"30"},{"size":2519,"mtime":1610041535470,"results":"49","hashOfConfig":"30"},{"size":183,"mtime":1609571857236,"results":"50","hashOfConfig":"30"},{"size":3841,"mtime":1610039788012,"results":"51","hashOfConfig":"30"},{"size":661,"mtime":1609708840344,"results":"52","hashOfConfig":"30"},{"size":1903,"mtime":1609742500000,"results":"53","hashOfConfig":"30"},{"size":835,"mtime":1610010775623,"results":"54","hashOfConfig":"30"},{"size":471,"mtime":1609769855832,"results":"55","hashOfConfig":"30"},{"size":855,"mtime":1610017793538,"results":"56","hashOfConfig":"30"},{"size":570,"mtime":1610104456125,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"2rxr0a",{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"82"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"82"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"91","usedDeprecatedRules":"63"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"82"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"82"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"115"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"118"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},"/home/fattylee/workspace/social-network/client/src/index.js",[],["123","124"],"/home/fattylee/workspace/social-network/client/src/reportWebVitals.js",[],["125","126"],"/home/fattylee/workspace/social-network/client/src/App.jsx",[],["127","128"],"/home/fattylee/workspace/social-network/client/src/pages/Home.jsx",[],"/home/fattylee/workspace/social-network/client/src/pages/Login.jsx",[],"/home/fattylee/workspace/social-network/client/src/pages/Register.jsx",[],["129","130"],"/home/fattylee/workspace/social-network/client/src/components/Header.jsx",[],"/home/fattylee/workspace/social-network/client/src/components/Post.jsx",[],"/home/fattylee/workspace/social-network/client/src/components/Todo.jsx",[],"/home/fattylee/workspace/social-network/client/src/context/auth.js",[],["131","132"],"/home/fattylee/workspace/social-network/client/src/context/AuthRoute.jsx",[],"/home/fattylee/workspace/social-network/client/src/pages/NotFound.jsx",[],"/home/fattylee/workspace/social-network/client/src/context/ProtectedRoute.jsx",[],"/home/fattylee/workspace/social-network/client/src/pages/PostForm.jsx",["133"],"import { gql, useMutation } from \"@apollo/client\";\nimport React, { useContext, useEffect, useRef } from \"react\";\nimport { Button, Form, Ref } from \"semantic-ui-react\";\nimport { AuthContext } from \"../context/auth\";\nimport { FormContext } from \"../context/postForm\";\nimport { CREATE_POST, EDIT_POST, FETCH_POSTS } from \"../utils/query\";\n\nconst initialValue = {\n  body: \"\",\n  id: \"\",\n};\nexport const PostForm = ({ history }) => {\n  const { logout } = useContext(AuthContext);\n\n  const { setError, error, setValue, value, handleInput } = useContext(\n    FormContext\n  );\n  const textArea = useRef(null);\n\n  useEffect(() => {\n    if (value?.id) {\n      const box = textArea.current.querySelector(\"textarea\");\n      const len = box.value.length;\n      box?.focus();\n      box?.setSelectionRange(len, len);\n    }\n  }, [value]);\n\n  const [addNewPost, { loading }] = useMutation(\n    !value.id ? CREATE_POST : EDIT_POST,\n    {\n      variables: {\n        body: value.body,\n        postId: value.id,\n      },\n      onError(error) {\n        console.error(JSON.stringify(error, null, 1), \"=======\");\n        const {\n          graphQLErrors: [err],\n        } = error;\n        if (err?.message?.includes(\"token\")) {\n          logout();\n          history.push(\"/login\");\n        }\n        if (err.extensions.code === \"BAD_USER_INPUT\") {\n          return setError(err.extensions.errors);\n        }\n        setError({ error: err.message });\n      },\n      update(cache, result) {\n        console.log(result);\n        if (!value.id) {\n          const data = cache.readQuery({ query: FETCH_POSTS });\n\n          cache.writeQuery({\n            query: FETCH_POSTS,\n            data: {\n              posts: [result.data.createPost, ...data.posts],\n            },\n          });\n          // investigate later why it is not working\n          // cache.modify({\n          //   fields: {\n          //     posts(existingPosts = []) {\n          //       const newPostRef = cache.writeFragment({\n          //         data: result.data.createPost,\n          //         fragment: gql`\n          //           fragment newPost on Post {\n          //             id\n          //             body\n          //             createdAt\n          //             username\n          //             commentCount\n          //             likeCount\n          //           }\n          //         `,\n          //       });\n          //       return [newPostRef, ...existingPosts];\n          //     },\n          //   },\n          // });\n        } else {\n          focusAndBlink(value);\n        }\n        setError({});\n        setValue(initialValue);\n      },\n    }\n  );\n\n  function submitPost(e) {\n    e.preventDefault();\n    addNewPost();\n  }\n\n  return (\n    <Form loading={loading} size=\"big\" onSubmit={submitPost}>\n      <Ref innerRef={textArea}>\n        <Form.TextArea\n          label=\"What's on your mind?\"\n          placeholder=\"What's happening?\"\n          name=\"body\"\n          value={value.body}\n          onChange={handleInput}\n          error={error.body}\n          id=\"textArea\"\n        />\n      </Ref>\n      <Button\n        loading={loading}\n        disabled={loading || !value.body.length}\n        color=\"blue\"\n      >\n        {!value.id ? \"Add\" : \"Edit\"} post\n      </Button>\n      <Button\n        content=\"Cancel\"\n        disabled={!value.body.length}\n        color=\"teal\"\n        type=\"button\"\n        onClick={() => {\n          setValue({ body: \"\", id: \"\" });\n        }}\n      />\n    </Form>\n  );\n};\n\nfunction focusAndBlink(value) {\n  const updatedPost = document.getElementById(value.id);\n  updatedPost?.querySelector(\"button\")?.focus();\n  updatedPost?.classList.add(\"my-flash\");\n  setTimeout(() => {\n    // remove animation after 3s\n    updatedPost?.classList.remove(\"my-flash\");\n  }, 3000);\n}\n","/home/fattylee/workspace/social-network/client/src/pages/Layout.jsx",[],["134","135"],"/home/fattylee/workspace/social-network/client/src/utils/apollo.js",[],"/home/fattylee/workspace/social-network/client/src/utils/hooks.js",[],"/home/fattylee/workspace/social-network/client/src/components/LikeButton.jsx",[],"/home/fattylee/workspace/social-network/client/src/components/DeleteButton.jsx",[],"/home/fattylee/workspace/social-network/client/src/utils/query.js",[],"/home/fattylee/workspace/social-network/client/src/components/MyPopup.jsx",[],"/home/fattylee/workspace/social-network/client/src/pages/SinglePost.jsx",[],"/home/fattylee/workspace/social-network/client/src/components/NetworkMessage.jsx",[],"/home/fattylee/workspace/social-network/client/src/components/CommentForm.jsx",[],"/home/fattylee/workspace/social-network/client/src/components/EditButton.jsx",[],["136","137"],"/home/fattylee/workspace/social-network/client/src/context/postForm.js",[],["138","139"],"/home/fattylee/workspace/social-network/client/src/components/CommentButton.jsx",[],"/home/fattylee/workspace/social-network/client/src/pages/InputTextForm.jsx",[],{"ruleId":"140","replacedBy":"141"},{"ruleId":"142","replacedBy":"143"},{"ruleId":"140","replacedBy":"144"},{"ruleId":"142","replacedBy":"145"},{"ruleId":"140","replacedBy":"146"},{"ruleId":"142","replacedBy":"147"},{"ruleId":"140","replacedBy":"148"},{"ruleId":"142","replacedBy":"149"},{"ruleId":"140","replacedBy":"150"},{"ruleId":"142","replacedBy":"151"},{"ruleId":"152","severity":1,"message":"153","line":1,"column":10,"nodeType":"154","messageId":"155","endLine":1,"endColumn":13},{"ruleId":"140","replacedBy":"156"},{"ruleId":"142","replacedBy":"157"},{"ruleId":"140","replacedBy":"158"},{"ruleId":"142","replacedBy":"159"},{"ruleId":"140","replacedBy":"160"},{"ruleId":"142","replacedBy":"161"},"no-native-reassign",["162"],"no-negated-in-lhs",["163"],["162"],["163"],["162"],["163"],["162"],["163"],["162"],["163"],"no-unused-vars","'gql' is defined but never used.","Identifier","unusedVar",["162"],["163"],["162"],["163"],["162"],["163"],"no-global-assign","no-unsafe-negation"]